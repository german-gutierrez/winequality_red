---
title: "winequality"
author: "Germán y Óscar"
date: "5/31/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Descripción del dataset

Este Dataset contiene los datos fisicoquimicos y sensoriales correspondientes a la variación roja del vino portugués "Vinho Verde". Las variables son las siguientes:

1. fixed acidity: ácidos no volatiles que no se evaporan fácilmente.

2. volatile acidity: indica el contenido de ácido acético en el vino, un alto contenido produce un desagradable sabor a vinagre.

3. citric acid: actúa como conservante para aumentar la acidez. En pequeñas cantidades aporta frescura y sabor al vino.

4. residual sugar: es la cantidad de azucar restante despues de la fermantación.Los vinos con más de 45g/l son dulces.

5. chlorides: La cantidad de sal que tiene el vino.

6. free sulfur dioxide: previene el crecimiento de microbios y la oxidación del vino.

7. total sulfur dioxide: Es la cantidad total (libres + ligadas) de SO2 del vino.

8. density: densidad del vino. Los vinos dulces tienen una mayor densidad.

9. pH: el nivel de acidez.

10. sulphates: un aditivo del vino que contribuye a los niveles de SO2 y actia como antimicrobiano y antioxidante.

11. alcohol: la cantidad de alcohol que contiene el vino.

12. quality: calidad del vino (puntuación entre 0 y 10).

### ¿Por qué es importante y qué pregunta/problema pretende responder?

El objetivo de este análisis es observar la relación entre las variables fisicoquímicas y la calidad del vino, e intentar predecir la calidad a partir de estas.

Este estudio puede ser de gran utilidad en cualquier sector relacionado con el vino, especialmente en bodegas, que pueden usar estos datos para mejorar la calidad de sus vinos.

## Integración y selección de los datos de interés a analizar.

Para este análisis trabajaremos con el dataset winequality-red disponible en la siguiente URL: https://www.kaggle.com/uciml/red-wine-quality-cortez-et-al-2009

Lo primero que haremos es cargar el dataset:

```{r}
wineData <- read.csv('winequality-red.csv', sep=",")
head(wineData)
```

Observamos la correlación entre las diferentes variables para decidir si podemos prescindir de alguna variable redundante.

```{r}
cor(wineData)
heatmap(x = cor(wineData), symm = TRUE)
```

Observamos que las variables más correlacionadas son:
fixed.acidity y density: tienen una correlación de 0.66804729
fixed.acidity y citric.acid: tienen una correlación de 0.67170343
total.sulfur.dioxide y free.sulfur.dioxide: tienen una correlación de 0.667666450

## Limpieza de los datos.


### ¿Los datos contienen ceros o elementos vacíos?

Una vez cargado el dataset comprobamos si este contiene elementos nulos o vacíos.

```{r}
colSums(is.na(wineData))
```
Observamos que no tiene elementos vacíos.

Comprobamos si el dataset contiene ceros.

```{r}
colSums(wineData==0)
```
Vemos que la única columna que contiene zeros es "citric.acid" con 132 registros.

### ¿Cómo gestionarías cada uno de estos casos?

Hemos visto que para la única variable que tenemos ceros es "citric.acid". Sospechamos que posiblemente, y más habiendo 132 registros con valor zero, sea relativamente frecuente encontrar algunos vinos sin ácido cítrico.

Procedemos a ver más detalladamente las estadísticas de esta variable.

```{r}
summary(wineData[,3])
```

Observamos que el primer cuartil tiene un valor de 0.090, la media de 0.260 y el valor máximo es 1. Viendo que hay valores tan cercanos a 0, asumimos que los 132 registros no son campos vacíos y simplemente significan que ese vino no contiene ácido cítrico. 

### Identificación y tratamiento de valores extremos.

Para la identificación de outliers utilizaremos los boxplots, que permite recuperar los valores de los outliers además de representarlos gráficamente.

```{r}
boxplot.stats(wineData$fixed.acidity)$out
boxplot(wineData$fixed.acidity,
  ylab = "fixed.acidity"
)
```
```{r}
boxplot.stats(wineData$volatile.acidity)$out
boxplot(wineData$volatile.acidity,
  ylab = "volatile.acidity"
)

```

```{r}
boxplot.stats(wineData$citric.acid)$out
boxplot(wineData$citric.acid,
  ylab = "citric.acid"
)
```

```{r}
boxplot.stats(wineData$residual.sugar)$out
boxplot(wineData$residual.sugar,
  ylab = "residual.sugar"
)
```

```{r}
boxplot.stats(wineData$chlorides)$out
boxplot(wineData$chlorides,
  ylab = "chlorides"
)
```

```{r}
boxplot.stats(wineData$free.sulfur.dioxide)$out
boxplot(wineData$free.sulfur.dioxide,
  ylab = "free.sulfur.dioxide"
)
```

```{r}
boxplot.stats(wineData$total.sulfur.dioxide)$out
boxplot(wineData$total.sulfur.dioxide,
  ylab = "total.sulfur.dioxide"
)
```

```{r}
boxplot.stats(wineData$density)$out
boxplot(wineData$density,
  ylab = "density"
)
```

```{r}
boxplot.stats(wineData$pH)$out
boxplot(wineData$pH,
  ylab = "pH"
)
```

```{r}
boxplot.stats(wineData$sulphates)$out
boxplot(wineData$sulphates,
  ylab = "sulphates"
)
```

```{r}
boxplot.stats(wineData$alcohol)$out
boxplot(wineData$alcohol,
  ylab = "alcohol"
)
```

A continuación mostramos algunas estadísticas del dataset como la media y el valor máximo de las variables que pueden resultarnos útiles a la hora de identificar mejor los outliers

```{r}
summary(wineData) 
```


Observamos que todas las variables presentan outliers.

Los outliers más alejados de la media son:

residual.sugar
free.sulfur.dioxide
total.sulfur.dioxide

Observamos la distribución de la calidad de los vinos de estos outliers.

```{r}
residual.sugar.outliers.quality = wineData$quality[wineData$residual.sugar %in% boxplot.stats(wineData$residual.sugar)$out]

hist(residual.sugar.outliers.quality)

```
```{r}
free.sulfur.dioxide.outliers.quality = wineData$quality[wineData$free.sulfur.dioxide %in% boxplot.stats(wineData$free.sulfur.dioxide)$out]

hist(free.sulfur.dioxide.outliers.quality)
```

```{r}
total.sulfur.dioxide.outliers.quality = wineData$quality[wineData$total.sulfur.dioxide %in% boxplot.stats(wineData$total.sulfur.dioxide)$out]

hist(total.sulfur.dioxide.outliers.quality)
```
Observamos que los outliers de residual.sugar siguen una distribución normal, mientras que los outliers tanto de free.sulfur.dioxide como de 
total.sulfur.dioxide adquieren principalmente valores de calidad de 5.

Previamente hemos visto que la correlación entre residual.sugar y quality era muy baja (0.013731637) por lo que tiene sentido que aún en los outliers observemos diferentes valores para quality con una distribución normal.

La correlación entre quality y free.sulfur.dioxide, y quality y total.sulfur.dioxide también es relativamente baja, -0.050656057 y -0.18510029 respectivamente. En estos casos podemos observar que estos outliers coinciden con una calidad mediocre del vino (5 en la mayoría de casos).

Una vez analizados los outliers asumimos que estos valores no son datos erroneos, por lo que no los eliminaremos.

## Análisis de los datos.

### Selección de los grupos de datos que se quieren analizar/comparar (planificación de los análisis a aplicar).

### Comprobación de la normalidad y homogeneidad de la varianza.

### Aplicación de pruebas estadísticas para comparar los grupos de datos.

## Representación de los resultados a partir de tablas y gráficas.

## Resolución del problema.

### ¿cuáles son las conclusiones?

### ¿Los resultados permiten responder al problema?

## Contribuciones

| Contribuciones              | Firma    |
|-----------------------------|----------|
| Investigación previa        | GGC, OAA |
| Redacción de las respuestas | GGC, OAA |
| Desarrollo código           | GGC, OAA |


